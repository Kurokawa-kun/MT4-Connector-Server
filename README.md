# MT4-Connector-Server
## 説明
MT4を外部のプログラムからコントロールするための制御基盤です。ここで公開しているのはサーバー側の機能です。

クライアントは以下のURLで公開しています：  
- Java版 クライアント  
https://github.com/Kurokawa-kun/MT4-Connector-Client-Java  
- Python版 クライアント  
https://github.com/Kurokawa-kun/MT4-Connector-Client-Python  
  
次のような仕組みで動作しています。通信にはOSの名前付きパイプを用いています。  
<img src="materials/MT4-Connector-Image1.PNG" width="50%">

将来的にやりたいことは次の通りです。相場情報をディープラーニングで学習して、注文を自動的に行うというものです。  
<img src="materials/MT4-Connector-Image2.PNG" width="50%">

## 必要なもの
必要に応じて以下のソフトウェアを用意してください。
- MT4
- Javaの開発環境、または
- Pythonの開発環境

## 使用方法

### クライアント側の準備

1. クライアント側のReleasesからzipをダウンロードします。
1. zipファイルの中身を開発用のフォルダに展開します。
1. 開発環境で開きます。
1. Connectorクラスを継承してOnInit, OnTick, OnDeinit関数を実装します。

### サーバー側の準備
1. サーバー側のReleasesからzipをダウンロードします。
1. zipファイルの中身をMT4のデータフォルダに展開します。
    ※ デフォルトのデータフォルダは以下：  
    C:\Users\（ユーザー名）\AppData\Roaming\MetaQuotes\Terminal\（インスタンスID）
1. MT4を起動します。
1. NavigatorウィンドウのExpertsツリーからConnectorをチャートに貼り付けます。  
    ※ 「DLLの使用を許可する」にチェックを入れてください
1. 必要なパラメータを入力します。
    1.1.作業ディレクトリ
    1.1.インタプリタ名

## 制限事項
以下の機能群は代替機能があることや、本機能の目的とは関連性が薄いためサポートしません。
- 算術関数
- 文字列関数
- 配列関数
- オブジェクト関数
- ファイル関数
- トレードシグナル
- GUIオブジェクト

## 既知の問題
- シンボルの数にもよりますが、全シンボル全時間足のデータを取得しようとすると1時間以上かかります。これは名前付きパイプのバッファが256バイトしかなく、データの送受信に時間がかかるためです。将来的には32768バイト程度に拡張して高速化する予定です。

## 補足
- MT5のサポートは？
    - そのうち手が空いたら取り組むかもしれません…。
